{"version":3,"sources":["webpack:///C:/Users/THINK/Desktop/【完整版交互源码】商城/main.js","webpack:///C:/Users/THINK/Desktop/【完整版交互源码】商城/pages/pay-methods/pay-methods.vue?3757","webpack:///C:/Users/THINK/Desktop/【完整版交互源码】商城/pages/pay-methods/pay-methods.vue?c701","webpack:///C:/Users/THINK/Desktop/【完整版交互源码】商城/pages/pay-methods/pay-methods.vue?354d","webpack:///C:/Users/THINK/Desktop/【完整版交互源码】商城/pages/pay-methods/pay-methods.vue?e5f4","webpack:///C:/Users/THINK/Desktop/【完整版交互源码】商城/pages/pay-methods/pay-methods.vue"],"names":["createPage","Page","components","price","uniListItem","data","loading","detail","id","payMethod","options","onLoad","e","uni","showToast","title","icon","JSON","parse","note","value","methods","submit","weixinMpPay","login","success","$H","get","code","token","native","then","res","console","log","paymentData","requestPayment","timeStamp","nonceStr","package","signType","paySign","redirectTo","url","stringify","fail","showModal","content","errMsg","showCancel","complete","catch","err","appPay","provider","orderInfo","change"],"mappings":"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","file":"pages/pay-methods/pay-methods.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/pay-methods/pay-methods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pay-methods.vue?vue&type=template&id=433c7b4c&\"\nvar renderjs\nimport script from \"./pay-methods.vue?vue&type=script&lang=js&\"\nexport * from \"./pay-methods.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/THINK/Desktop/【完整版交互源码】商城/pages/pay-methods/pay-methods.vue\"\nexport default component.exports","export * from \"-!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay-methods.vue?vue&type=template&id=433c7b4c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay-methods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\软件\\\\HBuilderX.2.0.4.20190706-alpha.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay-methods.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport price from \"@/components/common/price.vue\"\nimport uniListItem from \"@/components/uni-ui/uni-list-item/uni-list-item.vue\"\nexport default {\n\tcomponents: {\n\t\tprice,\n\t\tuniListItem\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading:false,\n\t\t\tdetail:{\n\t\t\t\tid:0,\n\t\t\t\tprice:0\n\t\t\t},\n\t\t\tpayMethod:\"alipay\",\n\t\t\toptions:[]\n\t\t}\n\t},\n\tonLoad(e) {\n\t\tif(!e.detail){\n\t\t\treturn uni.showToast({\n\t\t\t\ttitle: '支付失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t\tthis.detail = JSON.parse(e.detail)\n\t\t\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\n\n\t\tthis.options = [{\n\t\t\ttitle:\"微信支付\",\n\t\t\tnote:\"推荐使用微信支付\",\n\t\t\ticon:\"icon-weixinzhifu text-success\",\n\t\t\tvalue:\"wxpay\"\n\t\t}]\n\t\tthis.payMethod = 'wxpay'\n\n\t},\n\tmethods: {\n\t\t// 支付\n\t\tsubmit(){\n\t\t\t// 防止重复支付\n\t\t\tif(this.loading) return;\n\t\t\tthis.loading = true\n\n\n\n\n\t\t\tthis.weixinMpPay()\n\n\t\t},\n\t\t// 微信小程序支付\n\t\tweixinMpPay(){\n\t\t\t// 请求接口\n\t\t\tuni.login({\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tthis.$H.get('/payment/'+this.detail.id+'/wxmppay/'+e.code,{},{\n\t\t\t\t\t\ttoken:true,\n\t\t\t\t\t\tnative:true\n\t\t\t\t\t})\n\t\t\t\t\t.then(res=>{\n\t\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t\t\t// 发起小程序支付\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tappId:\"wxb1f305de99c0fe32\",\n\t\t\t\t\t\t\tnonceStr:\"ZM7mqDUe5wYVpz1h\",\n\t\t\t\t\t\t\tpackage:\"prepay_id=wx31215725257777f851bd31661280875100\",\n\t\t\t\t\t\t\tpaySign:\"2114A262F841E9A8080972A0D5C6E7F7\",\n\t\t\t\t\t\t\tsignType:\"MD5\",\n\t\t\t\t\t\t\ttimeStamp:\"1577800644\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t   let paymentData = res.data;\n\t\t\t\t\t   uni.requestPayment({\n\t\t\t\t\t       timeStamp: paymentData.timeStamp,\n\t\t\t\t\t       nonceStr: paymentData.nonceStr,\n\t\t\t\t\t       package: paymentData.package,\n\t\t\t\t\t       signType: 'MD5',\n\t\t\t\t\t       paySign: paymentData.paySign,\n\t\t\t\t\t       success: (res) => {\n\t\t\t\t\t           // 重定向/防止重复支付\n\t\t\t\t\t           uni.redirectTo({\n\t\t\t\t\t           \turl: '../pay-result/pay-result'\n\t\t\t\t\t           });\n\t\t\t\t\t           console.log('success:' + JSON.stringify(res));\n\t\t\t\t\t       },\n\t\t\t\t\t       fail: (res) => {\n\t\t\t\t\t           uni.showModal({\n\t\t\t\t\t               content: \"支付失败,原因为: \" + res\n\t\t\t\t\t                   .errMsg,\n\t\t\t\t\t               showCancel: false\n\t\t\t\t\t           })\n\t\t\t\t\t       },\n\t\t\t\t\t       complete: () => {\n\t\t\t\t\t           this.loading = false;\n\t\t\t\t\t       }\n\t\t\t\t\t   })\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err=>{\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '支付失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tfail: (e) => {\n\t\t\t\t\tconsole.log(\"fail\", e);\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t    content: \"支付失败,原因为: \" + e.errMsg,\n\t\t\t\t\t    showCancel: false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// app支付\n\t\tappPay(){\n\t\t\tthis.$H.get('/payment/'+this.detail.id+'/'+this.payMethod,{},{\n\t\t\t\ttoken:true,\n\t\t\t\tnative:true\n\t\t\t}).then(res=>{\n\t\t\t\tconsole.log(res);\n\t\t\t\tuni.requestPayment({\n\t\t\t\t    provider: this.payMethod,\n\t\t\t\t    orderInfo: res.data, //微信、支付宝订单数据\n\t\t\t\t    success: (res)=> {\n\t\t\t\t\t\t// 重定向/防止重复支付\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl: '../pay-result/pay-result'\n\t\t\t\t\t\t});\n\t\t\t\t        console.log('success:' + JSON.stringify(res));\n\t\t\t\t    },\n\t\t\t\t    fail: (err)=> {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\tcontent: '支付失败',\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t});\n\t\t\t\t        console.log('fail:' + JSON.stringify(err));\n\t\t\t\t    },\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).catch(err=>{\n\t\t\t\tthis.loading = false\n\t\t\t\tconsole.log(err);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '支付失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\t// 切换支付方式\n\t\tchange(e){\n\t\t\tthis.payMethod = e.detail.value\n\t\t}\n\t}\n}\n"],"sourceRoot":""}